<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flexible Budget Calculator</title>
  <style>
    :root{
      --bg:#f3f4f6; --text:#333; --card:#fff; --brand:#1e3a8a;
      --border:#d1d5db; --chip:#e0f2fe; --chip-b:#7dd3fc;
    }
    *{box-sizing:border-box}
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0 16px 48px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { margin: 40px 0 12px; color: var(--brand); font-weight: 800; }
    .sub { color:#6b7280; margin:0 0 8px; font-size:14px; }

    .calculator {
      background: var(--card);
      padding: 24px;
      margin-top: 12px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
      max-width: 720px;
      width: 100%;
    }
    label {
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 6px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .icon {
      width: 16px; height: 16px; display: inline-block; vertical-align: middle;
      color:#374151;
    }

    input[type="number"] {
      padding: 10px 36px 10px 12px;
      font-size: 1rem;
      border: 2px solid var(--border);
      border-radius: 10px;
      width: 100%;
      outline: none;
      transition: border-color .15s ease;
      background: #fff;
    }
    input[type="number"]:focus { border-color:#60a5fa; }

    .inline-inputs {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin: 16px 0 8px;
    }
    @media (max-width:720px){
      .inline-inputs { grid-template-columns: 1fr; }
    }

    .input-wrap{ position: relative; }
    .input-wrap .suffix{
      position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
      font-weight: 700; color:#6b7280; pointer-events:none;
    }

    .totals {
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin: 8px 0 18px;
    }
    .sum-chip{
      background: var(--chip);
      border:1px solid var(--chip-b);
      padding:6px 10px; border-radius:999px; font-size:14px; font-weight:700;
    }
    .sum-bad{ background:#fee2e2; border-color:#fca5a5; color:#b91c1c; }

    .result {
      background: var(--chip);
      border: 1px solid var(--chip-b);
      padding: 14px;
      border-radius: 12px;
    }
    .result p { margin: 8px 0; font-size: 1.05rem; }
    .value { font-weight: 800; }

    .chart-container { margin-top: 22px; }
    .muted { color:#6b7280; font-size:12px; margin-top:6px; }
  </style>
</head>
<body>

  <h1>Flexible Budget Calculator</h1>
  <p class="sub">Split your income into Needs / Wants / Savings with cute icons and live validation.</p>

  <div class="calculator" role="region" aria-label="Budget calculator">
    <label for="income">
      Monthly Income (₹)
    </label>
    <input type="number" id="income" placeholder="e.g. 50000" inputmode="decimal" min="0"/>

    <div class="inline-inputs" aria-label="Percentage inputs">
      <div>
        <label for="needsPercent" title="Essential expenses like rent, groceries, utilities">
          <!-- Home icon -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path d="M3 11l9-8 9 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M5 10v10h14V10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Needs (%)
        </label>
        <div class="input-wrap">
          <input type="number" id="needsPercent" value="50" min="0" max="100" inputmode="numeric" />
          <span class="suffix">%</span>
        </div>
      </div>

      <div>
        <label for="wantsPercent" title="Lifestyle: eating out, movies, shopping">
          <!-- Sparkles icon -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path d="M9 3l2 4 4 2-4 2-2 4-2-4-4-2 4-2 2-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M17 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Wants (%)
        </label>
        <div class="input-wrap">
          <input type="number" id="wantsPercent" value="30" min="0" max="100" inputmode="numeric" />
          <span class="suffix">%</span>
        </div>
      </div>

      <div>
        <label for="savingsPercent" title="Investments, emergency fund, FDs">
          <!-- Piggy bank icon -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path d="M3 12a7 7 0 0 1 7-7h3a7 7 0 0 1 7 7v2a3 3 0 0 1-3 3h-1l-1 2H9l-1-2H7a3 3 0 0 1-3-3v-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10 7h4" stroke-width="2" stroke-linecap="round"/>
            <circle cx="16.5" cy="11" r="1.2" fill="currentColor"/>
          </svg>
          Savings (%)
        </label>
        <div class="input-wrap">
          <input type="number" id="savingsPercent" value="20" min="0" max="100" inputmode="numeric" />
          <span class="suffix">%</span>
        </div>
      </div>
    </div>

    <div class="totals">
      <small class="muted">Tip: Total must be exactly 100%.</small>
      <span id="sumChip" class="sum-chip">Total: 100%</span>
    </div>

    <div class="result" id="resultBox" style="display: none;">
      <p><strong>Needs:</strong> ₹<span id="needs" class="value"></span>
        <small class="muted">(Rent, groceries, utilities, EMIs)</small></p>
      <p><strong>Wants:</strong> ₹<span id="wants" class="value"></span>
        <small class="muted">(Dining out, entertainment, shopping)</small></p>
      <p><strong>Savings:</strong> ₹<span id="savings" class="value"></span>
        <small class="muted">(Investments, emergency fund, FD)</small></p>
    </div>

    <div class="chart-container">
      <canvas id="barChart" aria-label="Bar chart of Needs, Wants, Savings" role="img"></canvas>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const incomeInput   = document.getElementById('income');
  const needsInput    = document.getElementById('needsPercent');
  const wantsInput    = document.getElementById('wantsPercent');
  const savingsInput  = document.getElementById('savingsPercent');

  const resultBox = document.getElementById('resultBox');
  const needsEl   = document.getElementById('needs');
  const wantsEl   = document.getElementById('wants');
  const savingsEl = document.getElementById('savings');
  const sumChip   = document.getElementById('sumChip');

  const ctx = document.getElementById('barChart').getContext('2d');
  let chart;

  function inr(n){
    if (isNaN(n)) return '';
    return n.toLocaleString('en-IN', { maximumFractionDigits: 2 });
  }

  function updateSumChip(sum){
    sumChip.textContent = `Total: ${sum}%`;
    if (sum !== 100) {
      sumChip.classList.add('sum-bad');
    } else {
      sumChip.classList.remove('sum-bad');
    }
  }

  function updateChart(needs, wants, savings) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Needs', 'Wants', 'Savings'],
        datasets: [{
          label: '₹ Value',
          data: [needs, wants, savings],
          backgroundColor: ['#60a5fa', '#fca5a5', '#4ade80'],
          borderRadius: 6
        }]
      },
      options: {
        animation: { duration: 300 },
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: (ctx) => '₹ ' + inr(ctx.parsed.y)
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: (value) => '₹' + inr(value)
            }
          }
        }
      }
    });
  }

  function saveToLocal() {
    const data = {
      income: incomeInput.value,
      needs: needsInput.value,
      wants: wantsInput.value,
      savings: savingsInput.value,
    };
    localStorage.setItem('budgetData', JSON.stringify(data));
  }

  function loadFromLocal() {
    const saved = JSON.parse(localStorage.getItem('budgetData'));
    if (saved) {
      if (saved.income) incomeInput.value = saved.income;
      if (saved.needs) needsInput.value = saved.needs;
      if (saved.wants) wantsInput.value = saved.wants;
      if (saved.savings) savingsInput.value = saved.savings;
    }
  }

  function calculate() {
    const income = parseFloat(incomeInput.value);
    const needsPercent = parseFloat(needsInput.value) || 0;
    const wantsPercent = parseFloat(wantsInput.value) || 0;
    const savingsPercent = parseFloat(savingsInput.value) || 0;

    const sum = (needsPercent + wantsPercent + savingsPercent);
    updateSumChip(isNaN(sum) ? 0 : sum);

    if (isNaN(income) || income <= 0 || sum !== 100) {
      resultBox.style.display = 'none';
      if (chart) { chart.destroy(); chart = null; }
      saveToLocal();
      return;
    }

    const needs   = +(income * needsPercent   / 100).toFixed(2);
    const wants   = +(income * wantsPercent   / 100).toFixed(2);
    const savings = +(income * savingsPercent / 100).toFixed(2);

    needsEl.textContent   = inr(needs);
    wantsEl.textContent   = inr(wants);
    savingsEl.textContent = inr(savings);

    resultBox.style.display = 'block';
    updateChart(needs, wants, savings);
    saveToLocal();
  }

  [incomeInput, needsInput, wantsInput, savingsInput].forEach(input => {
    input.addEventListener('input', calculate);
  });

  // Load saved values on start
  loadFromLocal();
  calculate();
</script>


</body>
</html>
